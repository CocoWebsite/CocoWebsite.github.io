/* Omniture Optimization Suite
 * Copyright (c) Omniture 2001-2008. All rights reserved. Patent Pending.
 * Privacy Policy at http://www.omniture.com/privacy/
 */
/************************** CONFIG SECTION **************************/
/* You may add or alter any code config here. */

var tc = window.tc || {};
tc.site_id = tc.site_id || 37;
tc.log_path = tc.log_path || "/static/includes/homepage/touchclarity/homepage";

// pre-live
// tc.server_hostname = tc.server_hostname || "test2.tc-prelive.com";

// live
tc.server_hostname = tc.server_hostname || "btow.touchclarity.com";

tc.timeout = tc.timeout || "3";

/************************** PLUGINS SECTION *************************/

// #636 Backward-compatibility plugin
if (typeof tc.autoStart == "undefined") { tc.autoStart = false; }

// #636 extra info from analytics
tc.extraInfoFromAnalytics = {};

// #636 page alias on variables
tc.pageAliasFromVariables = ['s_pageName'];
 
/**
 * SWFObject v1.4.4: Flash Player detection and embed - http://blog.deconcept.com/swfobject/
 *
 * SWFObject is (c) 2006 Geoff Stearns and is released under the MIT License:
 * http://www.opensource.org/licenses/mit-license.php
 *
 * **SWFObject is the SWF embed script formerly known as FlashObject. The name was changed for
 *   legal reasons.
 */
if(typeof deconcept=="undefined"){var deconcept=new Object();}if(typeof deconcept.util=="undefined"){deconcept.util=new Object();}if(typeof deconcept.SWFObjectUtil=="undefined"){deconcept.SWFObjectUtil=new Object();}deconcept.SWFObject=function(_1,id,w,h,_5,c,_7,_8,_9,_a,_b){if(!document.getElementById){return;}this.DETECT_KEY=_b?_b:"detectflash";this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY);this.params=new Object();this.variables=new Object();this.attributes=new Array();if(_1){this.setAttribute("swf",_1);}if(id){this.setAttribute("id",id);}if(w){this.setAttribute("width",w);}if(h){this.setAttribute("height",h);}if(_5){this.setAttribute("version",new deconcept.PlayerVersion(_5.toString().split(".")));}this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion();if(c){this.addParam("bgcolor",c);}var q=_8?_8:"high";this.addParam("quality",q);this.setAttribute("useExpressInstall",_7);this.setAttribute("doExpressInstall",false);var _d=(_9)?_9:window.location;this.setAttribute("xiRedirectUrl",_d);this.setAttribute("redirectUrl","");if(_a){this.setAttribute("redirectUrl",_a);}};deconcept.SWFObject.prototype={setAttribute:function(_e,_f){this.attributes[_e]=_f;},getAttribute:function(_10){return this.attributes[_10];},addParam:function(_11,_12){this.params[_11]=_12;},getParams:function(){return this.params;},addVariable:function(_13,_14){this.variables[_13]=_14;},getVariable:function(_15){return this.variables[_15];},getVariables:function(){return this.variables;},getVariablePairs:function(){var _16=new Array();var key;var _18=this.getVariables();for(key in _18){_16.push(key+"="+_18[key]);}return _16;},getSWFHTML:function(){var _19="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");}_19="<embed type=\"application/x-shockwave-flash\" src=\""+this.getAttribute("swf")+"\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\"";_19+=" id=\""+this.getAttribute("id")+"\" name=\""+this.getAttribute("id")+"\" ";var _1a=this.getParams();for(var key in _1a){_19+=[key]+"=\""+_1a[key]+"\" ";}var _1c=this.getVariablePairs().join("&");if(_1c.length>0){_19+="flashvars=\""+_1c+"\"";}_19+="/>";}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");}_19="<object id=\""+this.getAttribute("id")+"\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\">";_19+="<param name=\"movie\" value=\""+this.getAttribute("swf")+"\" />";var _1d=this.getParams();for(var key in _1d){_19+="<param name=\""+key+"\" value=\""+_1d[key]+"\" />";}var _1f=this.getVariablePairs().join("&");if(_1f.length>0){_19+="<param name=\"flashvars\" value=\""+_1f+"\" />";}_19+="</object>";}return _19;},write:function(_20){if(this.getAttribute("useExpressInstall")){var _21=new deconcept.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(_21)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title);}}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var n=(typeof _20=="string")?document.getElementById(_20):_20;n.innerHTML=this.getSWFHTML();return true;}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"));}}return false;}};deconcept.SWFObjectUtil.getPlayerVersion=function(){var _23=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var x=navigator.plugins["Shockwave Flash"];if(x&&x.description){_23=new deconcept.PlayerVersion(x.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."));}}else{try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}catch(e){try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");_23=new deconcept.PlayerVersion([6,0,21]);axo.AllowScriptAccess="always";}catch(e){if(_23.major==6){return _23;}}try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(e){}}if(axo!=null){_23=new deconcept.PlayerVersion(axo.GetVariable("$version").split(" ")[1].split(","));}}return _23;};deconcept.PlayerVersion=function(_27){this.major=_27[0]!=null?parseInt(_27[0]):0;this.minor=_27[1]!=null?parseInt(_27[1]):0;this.rev=_27[2]!=null?parseInt(_27[2]):0;};deconcept.PlayerVersion.prototype.versionIsValid=function(fv){if(this.major<fv.major){return false;}if(this.major>fv.major){return true;}if(this.minor<fv.minor){return false;}if(this.minor>fv.minor){return true;}if(this.rev<fv.rev){return false;}return true;};deconcept.util={getRequestParameter:function(_29){var q=document.location.search||document.location.hash;if(q){var _2b=q.substring(1).split("&");for(var i=0;i<_2b.length;i++){if(_2b[i].substring(0,_2b[i].indexOf("="))==_29){return _2b[i].substring((_2b[i].indexOf("=")+1));}}}return "";}};deconcept.SWFObjectUtil.cleanupSWFs=function(){if(window.opera||!document.all){return;}var _2d=document.getElementsByTagName("OBJECT");for(var i=0;i<_2d.length;i++){_2d[i].style.display="none";for(var x in _2d[i]){if(typeof _2d[i][x]=="function"){_2d[i][x]=function(){};}}}};deconcept.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};if(typeof window.onunload=="function"){var _30=window.onunload;window.onunload=function(){deconcept.SWFObjectUtil.cleanupSWFs();_30();};}else{window.onunload=deconcept.SWFObjectUtil.cleanupSWFs;}};if(typeof window.onbeforeunload=="function"){var oldBeforeUnload=window.onbeforeunload;window.onbeforeunload=function(){deconcept.SWFObjectUtil.prepUnload();oldBeforeUnload();};}else{window.onbeforeunload=deconcept.SWFObjectUtil.prepUnload;}if(Array.prototype.push==null){Array.prototype.push=function(_31){this[this.length]=_31;return this.length;};}var getQueryParamValue=deconcept.util.getRequestParameter;var FlashObject=deconcept.SWFObject;var SWFObject=deconcept.SWFObject;

/************* DO NOT ALTER ANYTHING BELOW THIS LINE ! **************/
window.undefined=window.undefined;var omtr=window.omtr||{};omtr.extend=function(_1,_2,_3){var _4=_1.split("."),_5=window;if(typeof _3!="boolean"){_3=false;}for(var i=0;i<_4.length;i++){_5[_4[i]]=_5[_4[i]]||{};_5=_5[_4[i]];}for(var _7 in _2){if(_3||typeof _5[_7]=="undefined"){_5[_7]=_2[_7];}}return _5;};omtr.extend("omtr.tc.plugin.backwards_compatibility",{init:function(_8){var _9=window;_9.tc_log=omtr.tc.log;_9.tc_redirect=omtr.tc.redirect;_9.tc_open_window=omtr.tc.open_window;_9.tc_optimise=omtr.tc.optimize;var i,_b,_c="undefined",_d=["active","site_id","timeout","page_alias","extra_info","referrer","products","containers","log_path"];for(i=0;i<_d.length;i++){_b=_d[i];if(typeof _9["tc_"+_b]!==_c){_8[_b]=_9["tc_"+_b];}}if(typeof _9.tc_server_url!==_c){_8.server_hostname=_9.tc_server_url;}}});omtr.extend("omtr.tc.plugin",{tc_swf_content:function(_e,_f){if(!_e||!(typeof _e=="object")){return _f;}if(typeof deconcept!="object"||typeof deconcept.SWFObject!="function"){return _f;}_e.id=_e.id||"tc-flash-content";_e.version=_e.version||"6.0.65";_e.backgroundColor=_e.backgroundColor||"#FFFFFF";if(!_e.swf||!_e.width||!_e.height){return _f;}var _10=new deconcept.SWFObject(_e.swf,_e["id"],_e.width,_e.height,_e.version,_e.backgroundColor,false,_e["quality"],false,_e["detectKey"],_e["detection"]);if(_e.vars&&typeof _e.vars=="object"){var a=[];for(var i=0;i<_e.vars.length;i++){if(typeof _e.vars[i]=="string"){a[i]=_e.vars[i].split("=");_10.addVariable(a[i][0],a[i][1]);}}}if(_10.installedVer.versionIsValid(_10.getAttribute("version"))){return _10.getSWFHTML();}else{return _f;}}});window.tc_swf_content=omtr.tc.plugin.tc_swf_content;omtr.extend("omtr.tc.plugin.tc_extra_info_from_analytics",{init:function(_13){if(!_13.extraInfoFromAnalytics){return _13;}var _14="",_15=_13.extraInfoFromAnalytics;_13.extra_info=_13.extra_info||"";_15.source=_15.source||omtr.data;_15.propList=_15.propList||window.undefined;if(typeof _15.encode!="boolean"){_15.encode=true;}if(typeof omtr.data==("object")&&typeof omtr.data.serialize==("function")){_14=omtr.data.serialize(_15.propList,_15.encode);_13.extra_info+=_14;return _13;}var _16,_17=_15.source,_18=(typeof encodeURIComponent!="undefined"?encodeURIComponent:escape);for(_16 in _17){if((typeof (_17[_16])!=("function"))&&(typeof (_17[_16])!=("array"))&&(typeof (_17[_16])!=("object"))&&(typeof (_17[_16])!=("undefined"))&&((_17[_16])!=(""))&&((_17[_16])!=(null))){_14+="&"+_18(_16.toString())+"="+_18(_17[_16]);}}_13.extra_info+=_14;return _13;}});omtr.extend("omtr.tc.plugin.sitecatalyst_reporting",{observers:[],ready:false,serveData:null,init:function(_19){this.doStandardReport=omtr.tc.report;omtr.tc.report=this.sendReport;},add:function(ele){this.observers.push(ele);if(omtr.tc.plugin.sitecatalyst_reporting.ready){if(typeof (ele)=="function"){ele.apply(this,[omtr.tc.serveData]);}}else{}},notify:function(_1b){for(var i=0;i<this.observers.length;i++){var _1d=this.observers[i];if(typeof (_1d)=="function"){_1d.apply(this,[_1b]);}}},sendReport:function(_1e){if(typeof _1e=="object"){omtr.tc.plugin.sitecatalyst_reporting.serveData=_1e;}else{_1e=omtr.tc.plugin.sitecatalyst_reporting.serveData;}var _1f=omtr.tc.plugin.sitecatalyst_reporting.doStandardReport();if((_1f===0)||(typeof _1f==="undefined"&&!_1e)){return;}else{if(_1f===2){omtr.tc.serveData={visitor:"Page Default"};}else{if(_1f===3){omtr.tc.serveData={visitor:"Page Error"};}else{if(_1e!==null&&typeof _1e=="object"){omtr.tc.serveData={visitor:_1e.visitor};}else{omtr.tc.serveData={visitor:"No Data From Server"};}}}}omtr.tc.plugin.sitecatalyst_reporting.ready=true;omtr.tc.plugin.sitecatalyst_reporting.notify(omtr.tc.serveData);}});omtr.extend("omtr.tc.plugin.tc_page_alias_from_variables",{init:function(_20){if(_20.page_alias){return _20;}var _21="",i,_23,_24=encodeURIComponent||escape,_25=_20.pageAliasFromVariables;if(typeof _25=="string"){_20.pageAliasFromVariables=[_20.pageAliasFromVariables];}if(typeof _25!="object"&&!_20.pageAliasFromVariables.length){return _20;}var _26=function(_27){var _28=_27.split("."),_29=window;for(var i=0;i<_28.length;i++){if(typeof _29[_28[i]]=="undefined"){return null;}else{_29=_29[_28[i]];}}return _29;};for(i=0;i<_25.length;i++){_23=_26(_25[i]);if(null===_23){_21+="/["+_25[i]+"]";}else{_21+="/"+_23;}}_20.page_alias=_21+window.location.search;return _20;}});omtr.extend("omtr.tc",{Version:"5.1",Vendor:"Omniture",Product:"TouchClarity"});(function(){var _2b=function(){var _2c="undefined";var api=this;var _2e=window.location;var _2f={timeout:5,site_id:425,server_hostname:"tagging-qa.touchclarity.com",active:true,base_url:_2e.href,products:"",referrer:(function(){if(typeof document.referrer==_2c){return _2c;}if(document.referrer===null){return "null";}if(document.referrer===""){return "empty";}return document.referrer;})(),log_path:"/touchclarity",containers:new function(){var _30=function(id,_32){this.id=id;this.rendered=false;this.displayed=false;this.defaulted=false;this.error=false;this.content="";this.default_content=_32;this.timeout_id=null;this.coids=[];};var ccs={};this.add=function(_34){var cc=new _30(_34,"");ccs[_34]=cc;return cc;};this.get=function(_36){var cc=ccs[_36];if(!cc){cc=this.add(_36);cc.error=true;}return cc;};this.getAll=function(){var _38=[];for(var id in ccs){if(ccs[id].constructor==_30){_38.push(ccs[id]);}}return _38;};this.getIDs=function(){var ids=[];for(var id in ccs){if(ccs[id].constructor==_30){ids.push(id);}}return ids;};}()};var _3c=new function(){var _3d=encodeURIComponent||escape;this.getLogURL=function(_3e,_3f,_40,_41,_42){var _43=function(url){if(typeof url==_2c||url===""||url===null){return _2e.href;}url=""+url;if(url.substring(0,4)!="http"&&url.substring(0,1)!="/"){url=_2e.pathname.substring(0,_2e.pathname.lastIndexOf("/")+1)+url;}if(url.substring(0,1)=="/"){url=api.logger.http+_2e.host+url;}return url;};var _45=function(_46){_46=(typeof _46!=_2c?_46:_2f.base_url);if(_46.indexOf("?")>0){_46=_46.substring(0,_46.indexOf("?"));}var al=(_46!=api.logger.http+_2e.host+_2e.pathname);return al;};if(typeof _3e==_2c){_3e="i";}if(typeof _3f==_2c){_3f=_2f.base_url;}_3f=_43(_3f);var url=api.logger.http+_2f.server_hostname+"/"+_3e+"?siteID="+_2f.site_id;var _49=new Date().getTime();url+="&ts="+(typeof _41!=_2c?_41:_49);var _4a=_2f.containers.getIDs();if(_4a.length>0){for(var cc=0;cc<_4a.length;cc++){url+="&ccID="+_3d(_4a[cc]);}}if(_3e=="c"){url+="&log=no";}var al=_45(_3f);if(al){url+="&alias=true";}if(_40&&_40.length){url+="&prod="+_3d(_40);}if(typeof _42!=_2c){url+=_42;}_3f=_3d(_3f);while(_3f.length>1999-url.length){_3f=_3f.substring(0,_3f.lastIndexOf(_3d("&")));}url+="&location="+_3f;var dg={};dg.tagv=_3d(omtr.tc.Version);dg.tz=0-(new Date().getTimezoneOffset());dg.r=_3d(_2f.referrer);dg.title=""+_3d(document.title);if(al){dg.aliased=_3d(_2e.href);}if(screen){dg.cd=screen.colorDepth;dg.ah=screen.availHeight;dg.aw=screen.availWidth;dg.sh=screen.height;dg.sw=screen.width;dg.pd=screen.pixelDepth;}for(var key in dg){if((typeof (dg[key])!=("function"))&&(typeof (dg[key])!=("array"))&&(typeof (dg[key])!=("object"))){var _4f="&"+key+"="+dg[key];if(url.length+_4f.length<2000){url+=_4f;}else{break;}}}return url;};}();this.logger=new function(){var _50=this;this.loaded=true;this.http="http"+(_2e.href.substring(0,6)=="https:"?"s":"")+"://";var _51=false;var _52=false;var _53=[];var _54=function(_55,url,_57,_58,_59){if(typeof url==_2c||url===""){return false;}if(_2f.active){var _5a=new Image();_5a.src=_3c.getLogURL("i",_57,_59,new Date().getTime());_53.push(_5a);}if(typeof _58==_2c){return window.open(url,_55);}else{return window.open(url,_55,_58);}};var _5b=function(_5c,_5d,_5e){if(!_2f.active){return null;}var _5f=new Image();_5f.src=_3c.getLogURL("i",_5c,_5d,new Date().getTime(),_5e);_53.push(_5f);return _5f;};var _60=function(_61,url,_63,_64,_65,_66){var _67=null;if(typeof url==_2c||url===""){return;}if(typeof _66==_2c||_66===""){_66="window.location.href='"+url+"'";}if(typeof _63==_2c){_63=url;}if(typeof _61==_2c||_61===""||_61=="_self"){if(_2f.active){_67=new Image();_67.timeout_id=setTimeout(_66,(_2f.timeout*1000));_67.onload=function(){eval(_66);clearTimeout(_50.image.timeout_id);};_67.onerror=function(){eval(_66);clearTimeout(_50.image.timeout_id);};_67.src=_3c.getLogURL("i",_63,_65,new Date().getTime());_53.push(_67);}else{eval(_66);}}else{if(typeof _61=="object"&&_61.document){if(_2f.active){_67=new Image();_67.src=_3c.getLogURL("i",_63,_65);_53.push(_67);}_61.location.href=url;}else{_54(_61,url,_63,_64,_65);}}};var _68=function(_69){if(_69.containers){return null;}else{var _6a=null;if(_2f.active&&!_52){_6a=_5b();_6a.onload=function(){_51=true;};}_52=true;return _6a;}};this.init=function(_6b){if(_52){return;}if(typeof _6b!="object"){if(typeof window.tc=="object"){_6b=window.tc;}else{_6b={};}}if(_6b.active===false||_6b.active==="false"||_6b.active===0){_2f.active=false;}if(_6b.site_id){_2f.site_id=_6b.site_id;}if(_6b.server_hostname){_2f.server_hostname=_6b.server_hostname;}if(_6b.page_alias){_2f.base_url=_6b.page_alias;}if(_6b.extra_info){_2f.base_url+=(_2f.base_url.indexOf("?")>0?"&":"?")+_6b.extra_info;}if(_6b.products){_2f.products=_6b.products;}if(_6b.referrer){_2f.referrer=_6b.referrer;}_68(_6b);};api.log=_5b;api.redirect=_60;}();this.targeter=new function(){this.loaded=true;this.content_url="";var _6c=false;var _6d=false;var _6e=function(){return (!document.getElementById&&!document.all);};var _6f=function(){if(_6d===true){return 0;}var cc,_71=_2f.containers.getAll(),_72="",_73=0,_74=0,_75=0;for(var i=0;i<_71.length;i++){cc=_71[i];if(cc.error){_72+="&error="+cc.id;_73++;}}if(_73>0){api.log(null,null,_72);_6d=true;return 3;}for(var i=0;i<_71.length;i++){cc=_71[i];if(!cc.displayed&&!cc.defaulted){return 0;}if(cc.defaulted){_72+="&default="+cc.id;_74++;}else{for(var co=0;co<cc.coids.length;co++){_72+="&displayed="+cc.coids[co];_75++;}}}api.log(null,null,_72);_6d=true;var _78=1;if(_74>0&&_75==0){_78=2;}if(_74>0&&_75>0){_78=3;}return _78;};api.report=_6f;var _79=function(cc){return (function(){if(!cc.displayed){cc.defaulted=true;document.getElementById("tc_content_"+cc.id).innerHTML=cc.default_content;}omtr.tc.report();});};var _7b=function(id,_7d){var _7e=function(_7f){document.write("<span id='tc_content_"+id+"'>"+_7f+"</span>");};if(_6e()){_7e(_7d);return;}var cc=_2f.containers.get(id);cc.default_content=_7d;if(cc.error===true){_7e(_7d);}else{if(cc.content!==""){if(cc.content=="__default__"){_7e(cc.default_content);}else{_7e(cc.content);}cc.displayed=true;}else{_7e("");cc.rendered=true;if(cc.default_content){var _81=_79(cc);cc.timeout_id=setTimeout(_81,_2f.timeout*1000);}}}omtr.tc.report();};var _82=function(_83,_84,_85){var cc=_2f.containers.get(_83);if(cc.defaulted){return;}cc.coids.push(_84);if(cc.rendered){if(_85=="__default__"){_85=cc.default_content;}document.getElementById("tc_content_"+_83).innerHTML+=_85;cc.displayed=true;}else{cc.content+=_85;}};this.init=function(_87){if(_6c){return;}if(typeof _87.containers=="string"){_2f.containers.add(_87.containers);}else{if(_87.containers&&_87.containers.length){for(var i=0;i<_87.containers.length;i++){_2f.containers.add(_87.containers[i]);}}else{return;}}if(_87.log_path){_2f.log_path=_87.log_path;}if(_2f.active&&!_6e()){var _89=_87.test?_3c.fixURL(_87.test):_3c.getLogURL("c");this.content_url="<scr"+"ipt src='"+_89+"'></scr"+"ipt>";if(_87.test){document.writeln(this.content_url);}else{document.writeln("<iframe id='tc_iframe' src='"+_2f.log_path+"/tc_targeting.html' width=0 height=0 style='display:none'></iframe>");}}_6c=true;};api.optimize=_7b;api.set_content=_82;}();var _8a=function(_8b){if(omtr.tc.plugin){for(var _8c in omtr.tc.plugin){if(omtr.tc.plugin[_8c].init){omtr.tc.plugin[_8c].init(_8b);}}}};var _8d=false;this.init=function(_8e){if(_8d){return;}if(typeof _8e!="object"){if(typeof window.tc=="object"){_8e=window.tc;}else{_8e={};}}_8a(_8e);this.logger.init(_8e);this.targeter.init(_8e);_8d=true;};};omtr.extend("omtr.tc",new _2b());if(window.tc&&window.tc.autoStart){omtr.tc.init(tc);}})();
